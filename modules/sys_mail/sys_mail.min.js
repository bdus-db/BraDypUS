/**
 * @author			Julian Bogdani <jbogdani@gmail.com>
 * @copyright		BraDypUS, Julian Bogdani <jbogdani@gmail.com>
 * @license			See file LICENSE distributed with this code
 */
var sys_mail={init:function(){core.open({title:core.tr("system_email"),obj:"sys_mail_ctrl",method:"showForm",buttons:[{text:core.tr("send"),click:function(){var e=$("#modal form");sys_mail.send(e)}},{text:core.tr("close"),action:"close"}]},"modal")},send:function(e){e.find(':input[name="to[]"]').is(":checked")&&e.find(':input[name="subject"]').val()&&e.find(':input[name="body"]').val()?core.open({obj:"sys_mail_ctrl",method:"send",post:e.serializeArray(),buttons:[{text:core.tr("close"),action:"close"}]},"modal"):core.message(core.tr("recipient_subject_body_required"),"error")}};