/**
 * @author			Julian Bogdani <jbogdani@gmail.com>
 * @copyright		BraDypUS, Julian Bogdani <jbogdani@gmail.com>
 * @license			See file LICENSE distributed with this code
 */
var saved_queries={init:function(e){e?core.getJSON("saved_queries_ctrl","getById",{id:e},!1,(function(t){"success"==t.status?api.showResults(t.tb,"type=obj_encoded&obj_encoded="+t.obj_encoded,core.tr("saved_queries")+" ("+t.tb+")"):core.message(core.tr("saved_query_does_not_exist",e),"error",!0)})):saved_queries.showAll()},showAll:function(){$.get("./?obj=saved_queries_ctrl&method=showAll",(function(e){e&&""!=e?(core.open({html:e,title:core.tr("saved_queries")}),$("td.buttons a").click((function(){var e=$(this);switch(e.data("action")){case"share":$.get("./?obj=saved_queries_ctrl&method=shareQuery&id="+e.data("id"),(function(t){core.message(t.text,t.status),"success"===t.status&&e.data("action","unshare").html(core.tr("unshare"))}),"json");break;case"unshare":$.get("./?obj=saved_queries_ctrl&method=unShareQuery&id="+e.data("id"),(function(t){core.message(t.text,t.status),"success"===t.status&&e.data("action","share").html(core.tr("share"))}),"json");break;case"erase":$.get("./?obj=saved_queries_ctrl&method=deleteQuery&id="+e.data("id"),(function(t){core.message(t.text,t.status),"success"==t.status&&e.parents("tr").remove()}),"json");break;case"execute":api.showResults(e.data("tb"),"type=obj_encoded&obj_encoded="+e.data("text"),core.tr("saved_queries")+" ("+e.data("tb")+")")}return!1}))):core.message(core.tr("no_saved_queries"))}))}};