/**
 * @author			Julian Bogdani <jbogdani@gmail.com>
 * @copyright		BraDypUS, Julian Bogdani <jbogdani@gmail.com>
 * @license			See file LICENSE distributed with this code
 */
var user={init:function(e,o){e?user.showUserForm(e,o):user.mng()},mng:function(){core.open({obj:"user_ctrl",method:"showList",title:core.tr("user_mng"),unique:!0})},showUserForm:function(e,o){core.open({obj:"user_ctrl",method:"showUserForm",param:{id:e},buttons:[{text:core.tr("save"),click:function(){var t=$("#modal").find("form").serialize();e||$("#modal").find('input[name="name"]').val()&&$("#modal").find('input[name="email"]').val()&&$("#modal").find('input[name="password"]').val()?core.getJSON("user_ctrl","saveUserData",!1,t,(function(e){core.message(e.text,e.status),"success"==e.status&&($("#modal").modal("hide"),o||layout.tabs.reloadActive())}),"json"):core.message(core.tr("all_fields_needed"),"error")}},{text:core.tr("cancel"),action:"close"}]},"modal")},deleteOne:function(e){core.open({html:core.tr("confirm_erase_user"),buttons:[{text:core.tr("confirm"),click:function(){$.get("./?obj=user_ctrl&method=deleteOne&id="+e,(function(e){core.message(e.message,e.type),$("#modal").modal("hide"),layout.tabs.reloadActive()}),"json")}},{text:core.tr("cancel"),action:"close"}]},"modal")}};