/**
 * @author			Julian Bogdani <jbogdani@gmail.com>
 * @copyright		BraDypUS, Julian Bogdani <jbogdani@gmail.com>
 * @license			See file LICENSE distributed with this code
 */
var search_replace={init:function(){core.open({obj:"search_replace_ctrl",method:"main_page",title:core.tr("find_replace"),buttons:[{text:core.tr("find_replace"),click:function(){search_replace.run()}},{text:core.tr("cancel"),action:"close"}]},"modal")},run:function(){var e=$("#modal select.tb").val(),t=$("#modal select.tb option:selected").text(),c=$("#modal select.fld").val(),l=$("#modal select.fld option:selected").text(),o=$("#modal input.search").val(),r=$("#modal input.replace").val();e&&c&&o?core.open({title:core.tr("attention"),html:core.tr("confirm_search_replace",[t,l,o,r]),buttons:[{text:core.tr("confirm"),click:function(){core.runAndRespond("search_replace_ctrl","replace",{tb:e,fld:c,search:o,replace:r},(e=>{"success"===e.status&&$("#modal").modal("hide")}))}},{text:core.tr("cancel"),action:"close"}]},"modal"):core.message(core.tr("all_fields_required"),"error")},setFld:function(e,t){$("#"+e).find("div.fld").show(),$("#"+e).find("select.fld").html($("<option />")),$.get("./?obj=search_replace_ctrl&method=getFld&tb="+t,(function(t){$.each(t,(function(t,c){$("<option />").attr("value",t).text(c).appendTo($("#"+e).find("select.fld"))}))}),"json")}};