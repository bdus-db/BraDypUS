/**
 * @author			Julian Bogdani <jbogdani@gmail.com>
 * @copyright		BraDypUS, Julian Bogdani <jbogdani@gmail.com>
 * @license			See file LICENSE distributed with this code
 */
var chart={init:function(t,r){"showChart"===t&&r?chart.showChartById(r):t?chart.showBuilder(t,r):chart.showSaved()},editChartGUI:function(t){core.open({obj:"chart_ctrl",method:"edit_form",param:{id:t},title:core.tr("edit_chart")})},editChart:function(t,r,e){core.getJSON("chart_ctrl","update_chart",!1,{id:t,name:r,text:e},(function(t){core.message(t.text,t.status)}))},buildFromParams:function(t){core.open({obj:"chart_ctrl",method:"process_chart_data",title:core.tr("chart"),post:t})},showSaved:function(){core.open({obj:"chart_ctrl",method:"show_all_charts",title:core.tr("saved_charts")})},showChartById:function(t){core.open({obj:"chart_ctrl",method:"display_chart",title:core.tr("chart"),param:{id:t}})},saveAs:function(t){core.open({html:`<div>\n\t\t\t\t<label>${core.tr("chart_name")}</label>\n\t\t\t\t<br>\n\t\t\t\t<input type="text" class="chart_name form-control">\n\t\t\t\t</div>`,title:core.tr("save_chart_as"),buttons:[{text:core.tr("save"),click:function(){core.getJSON("chart_ctrl","save_chart_as",!1,{query_text:t,name:$("#modal input.chart_name").val()},(function(t){core.message(t.text,t.status),"success"===t.status&&$("#modal").modal("hide")}))}},{text:core.tr("cancel"),action:"close"}]},"modal")},showBuilder:function(t,r){core.open({title:core.tr("build_chart"),obj:"chart_ctrl",method:"show_chart_builder",param:{tb:t,obj_encoded:r}})}};